<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICSE Planner - Syllabus Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Poppins', sans-serif; }
        
        :root {
            --primary-color: #3b82f6;
            --primary-dark: #1e40af;
            --primary-light: #60a5fa;
        }
        
        .theme-blue { --primary-color: #3b82f6; --primary-dark: #1e40af; --primary-light: #60a5fa; }
        .theme-red { --primary-color: #ef4444; --primary-dark: #b91c1c; --primary-light: #f87171; }
        .theme-pink { --primary-color: #ec4899; --primary-dark: #be185d; --primary-light: #f472b6; }
        .theme-purple { --primary-color: #8b5cf6; --primary-dark: #5b21b6; --primary-light: #a78bfa; }
        .theme-green { --primary-color: #10b981; --primary-dark: #047857; --primary-light: #34d399; }
        .theme-orange { --primary-color: #f97316; --primary-dark: #c2410c; --primary-light: #fb923c; }
        .theme-cyan { --primary-color: #06b6d4; --primary-dark: #0e7490; --primary-light: #22d3ee; }
        
        .light-mode {
            --bg-primary: #f1f5f9;
            --bg-secondary: #ffffff;
            --bg-card: rgba(255, 255, 255, 0.9);
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: rgba(0, 0, 0, 0.1);
        }
        
        .dark-mode {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: rgba(255, 255, 255, 0.1);
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: rgba(255, 255, 255, 0.1);
        }
        
        body.light-mode {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%);
            color: var(--text-primary);
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
            color: var(--text-primary);
        }
        
        .glass {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
        }
        
        .light-mode .glass {
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .light-mode .text-slate-400 { color: #64748b; }
        .light-mode .text-slate-300 { color: #475569; }
        .light-mode .text-slate-500 { color: #94a3b8; }
        .light-mode .bg-slate-800\/50 { background: rgba(241, 245, 249, 0.9); }
        .light-mode .bg-slate-700 { background: #e2e8f0; }
        .light-mode .border-slate-700 { border-color: #cbd5e1; }
        .light-mode .border-slate-700\/50 { border-color: rgba(203, 213, 225, 0.5); }
        .light-mode .hover\:bg-slate-700\/30:hover { background: rgba(226, 232, 240, 0.5); }
        .light-mode .timer-digit { background: linear-gradient(180deg, var(--primary-dark) 0%, var(--primary-color) 50%, var(--primary-dark) 100%); }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(var(--primary-color), 0.5); }
            50% { box-shadow: 0 0 40px rgba(var(--primary-color), 0.8), 0 0 60px rgba(147, 51, 234, 0.5); }
        }
        
        @keyframes slide-up {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slide-in-left {
            from { opacity: 0; transform: translateX(-100px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes slide-in-right {
            from { opacity: 0; transform: translateX(100px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes bounce-in {
            0% { opacity: 0; transform: scale(0.3); }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes modal-in {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .animate-slide-up { animation: slide-up 0.6s ease-out forwards; }
        .animate-slide-left { animation: slide-in-left 0.6s ease-out forwards; }
        .animate-slide-right { animation: slide-in-right 0.6s ease-out forwards; }
        .animate-bounce-in { animation: bounce-in 0.8s ease-out forwards; }
        .animate-shake { animation: shake 0.5s ease-in-out; }
        .animate-spin-slow { animation: spin-slow 20s linear infinite; }
        .animate-modal { animation: modal-in 0.3s ease-out forwards; }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .card-hover:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .btn-3d {
            transition: all 0.2s;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }
        .btn-3d:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 rgba(0,0,0,0.2);
        }
        
        .google-btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .google-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        .google-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        .google-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 40px rgba(66, 133, 244, 0.4);
        }
        
        .progress-ring {
            transition: stroke-dashoffset 0.5s ease;
        }
        
        .page { display: none; }
        .page.active { display: block; }
        
        .confetti-piece {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            animation: confetti 3s ease-out forwards;
        }
        
        .chapter-item {
            transition: all 0.3s ease;
        }
        .chapter-item:hover {
            transform: translateX(10px);
        }
        
        .subject-accordion {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .subject-accordion.open {
            max-height: 3000px;
        }
        
        .timer-digit {
            background: linear-gradient(180deg, var(--primary-dark) 0%, var(--primary-color) 50%, var(--primary-dark) 100%);
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .orbit {
            position: absolute;
            border: 1px dashed rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            animation: spin-slow 20s linear infinite;
        }
        
        .orbit-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--primary-color);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--primary-color);
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }
        
        .loading-dots span {
            animation: bounce-in 1.4s infinite ease-in-out both;
        }
        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
        .loading-dots span:nth-child(3) { animation-delay: 0s; }
        
        .color-option {
            transition: all 0.3s ease;
        }
        .color-option:hover {
            transform: scale(1.2);
        }
        .color-option.active {
            transform: scale(1.2);
            box-shadow: 0 0 0 3px white, 0 0 0 5px currentColor;
        }
        
        .modal-overlay {
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body class="dark-mode theme-blue min-h-screen overflow-x-hidden">
    
    <!-- Floating Background Elements -->
    <div id="bgElements" class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute top-20 left-10 w-72 h-72 bg-blue-500/20 rounded-full blur-3xl animate-float"></div>
        <div class="absolute bottom-20 right-10 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-float" style="animation-delay: 1s;"></div>
        <div class="absolute top-1/2 left-1/2 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl animate-float" style="animation-delay: 2s;"></div>
        <div class="absolute top-1/4 right-1/4 w-48 h-48 bg-cyan-500/10 rounded-full blur-3xl animate-float" style="animation-delay: 1.5s;"></div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-slate-900 z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="relative w-32 h-32 mx-auto mb-6">
                <div class="orbit w-32 h-32" style="animation-duration: 3s;">
                    <div class="orbit-dot" style="top: 0; left: 50%; transform: translateX(-50%);"></div>
                </div>
                <div class="orbit w-24 h-24 top-4 left-4" style="animation-duration: 2s; animation-direction: reverse;">
                    <div class="orbit-dot" style="top: 50%; right: 0; transform: translateY(-50%); background: #8b5cf6; box-shadow: 0 0 10px #8b5cf6;"></div>
                </div>
                <img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c4/CISCE_logo.png/150px-CISCE_logo.png" 
                     alt="ICSE Logo" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-white p-2">
            </div>
            <h2 class="text-2xl font-bold text-white" style="background: linear-gradient(90deg, #60a5fa, #a78bfa, #f472b6, #60a5fa); background-size: 300% 100%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: gradient-shift 3s ease infinite;">
                ICSE Planner
            </h2>
            <div class="loading-dots flex justify-center gap-1 mt-4">
                <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
                <span class="w-3 h-3 bg-purple-500 rounded-full"></span>
                <span class="w-3 h-3 bg-pink-500 rounded-full"></span>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 z-50 hidden">
        <div class="modal-overlay absolute inset-0 bg-black/50" onclick="closeSettings()"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg p-4">
            <div class="glass rounded-3xl p-6 animate-modal">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold flex items-center gap-3">
                        <span class="text-3xl">‚öôÔ∏è</span> Settings
                    </h2>
                    <button onclick="closeSettings()" class="p-2 hover:bg-white/10 rounded-xl transition-all">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Theme Toggle -->
                <div class="mb-8">
                    <h3 class="font-semibold mb-4 flex items-center gap-2">
                        <span>üåì</span> Theme Mode
                    </h3>
                    <div class="flex gap-4">
                        <button onclick="setThemeMode('dark')" id="darkModeBtn" class="flex-1 p-4 rounded-2xl border-2 border-slate-700 hover:border-purple-500 transition-all flex items-center justify-center gap-3">
                            <span class="text-2xl">üåô</span>
                            <span class="font-medium">Dark</span>
                        </button>
                        <button onclick="setThemeMode('light')" id="lightModeBtn" class="flex-1 p-4 rounded-2xl border-2 border-slate-700 hover:border-yellow-500 transition-all flex items-center justify-center gap-3">
                            <span class="text-2xl">‚òÄÔ∏è</span>
                            <span class="font-medium">Light</span>
                        </button>
                    </div>
                </div>
                
                <!-- Color Selection -->
                <div class="mb-8">
                    <h3 class="font-semibold mb-4 flex items-center gap-2">
                        <span>üé®</span> Accent Color
                    </h3>
                    <div class="flex flex-wrap gap-4 justify-center">
                        <button onclick="setThemeColor('blue')" class="color-option w-12 h-12 rounded-full bg-blue-500 hover:ring-4 ring-blue-500/30" data-color="blue"></button>
                        <button onclick="setThemeColor('red')" class="color-option w-12 h-12 rounded-full bg-red-500 hover:ring-4 ring-red-500/30" data-color="red"></button>
                        <button onclick="setThemeColor('pink')" class="color-option w-12 h-12 rounded-full bg-pink-500 hover:ring-4 ring-pink-500/30" data-color="pink"></button>
                        <button onclick="setThemeColor('purple')" class="color-option w-12 h-12 rounded-full bg-purple-500 hover:ring-4 ring-purple-500/30" data-color="purple"></button>
                        <button onclick="setThemeColor('green')" class="color-option w-12 h-12 rounded-full bg-green-500 hover:ring-4 ring-green-500/30" data-color="green"></button>
                        <button onclick="setThemeColor('orange')" class="color-option w-12 h-12 rounded-full bg-orange-500 hover:ring-4 ring-orange-500/30" data-color="orange"></button>
                        <button onclick="setThemeColor('cyan')" class="color-option w-12 h-12 rounded-full bg-cyan-500 hover:ring-4 ring-cyan-500/30" data-color="cyan"></button>
                    </div>
                </div>
                
                <!-- Exam Date Change -->
                <div class="mb-8">
                    <h3 class="font-semibold mb-4 flex items-center gap-2">
                        <span>üìÖ</span> Change Exam Date
                    </h3>
                    <div class="flex gap-3">
                        <input type="date" id="newExamDate" class="flex-1 px-4 py-3 bg-slate-800/50 rounded-xl border border-slate-700 focus:border-blue-500 transition-all">
                        <button onclick="updateExamDate()" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl font-medium transition-all">
                            Update
                        </button>
                    </div>
                </div>
                
                <!-- Reset Progress -->
                <div class="mb-6">
                    <h3 class="font-semibold mb-4 flex items-center gap-2">
                        <span>üîÑ</span> Reset Options
                    </h3>
                    <div class="flex gap-3">
                        <button onclick="resetProgress()" class="flex-1 p-3 bg-yellow-600/20 text-yellow-400 border border-yellow-600/50 rounded-xl hover:bg-yellow-600/30 transition-all">
                            Reset Progress
                        </button>
                        <button onclick="resetAll()" class="flex-1 p-3 bg-red-600/20 text-red-400 border border-red-600/50 rounded-xl hover:bg-red-600/30 transition-all">
                            Reset Everything
                        </button>
                    </div>
                </div>
                
                <!-- App Info -->
                <div class="text-center pt-4 border-t border-slate-700/50">
                    <p class="text-slate-500 text-sm">ICSE Planner v1.0</p>
                    <p class="text-slate-600 text-xs mt-1">Made with ‚ù§Ô∏è for ICSE Students</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div id="app" class="relative z-10 min-h-screen">
        
        <!-- Auth Page -->
        <div id="authPage" class="page active">
            <div class="min-h-screen flex items-center justify-center p-4">
                <div class="w-full max-w-md">
                    <!-- Logo -->
                    <div class="text-center mb-8 animate-bounce-in">
                        <div class="relative inline-block">
                            <div class="absolute inset-0 bg-blue-500/30 rounded-full blur-xl animate-pulse-glow"></div>
                            <img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c4/CISCE_logo.png/150px-CISCE_logo.png" 
                                 alt="ICSE Logo" class="relative w-28 h-28 mx-auto mb-4 animate-float rounded-full bg-white p-3 shadow-2xl">
                        </div>
                        <h1 class="text-5xl font-extrabold mt-4" style="background: linear-gradient(90deg, #60a5fa, #a78bfa, #f472b6, #60a5fa); background-size: 300% 100%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: gradient-shift 3s ease infinite;">
                            ICSE Planner
                        </h1>
                        <p class="text-slate-400 mt-3 text-lg">Your Complete Syllabus Tracker</p>
                    </div>
                    
                    <!-- Auth Card -->
                    <div class="glass rounded-3xl p-8 animate-slide-up shadow-2xl">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-bold mb-2">Welcome! üëã</h2>
                            <p class="text-slate-400">Sign in to track your ICSE journey</p>
                        </div>
                        
                        <!-- Google Sign In Button -->
                        <button onclick="signInWithGoogle()" id="googleSignInBtn" 
                            class="google-btn w-full py-4 px-6 bg-white text-gray-700 rounded-2xl font-semibold text-lg flex items-center justify-center gap-4 hover:bg-gray-50 transition-all">
                            <svg class="w-6 h-6" viewBox="0 0 24 24">
                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            <span>Continue with Google</span>
                        </button>
                        
                        <!-- Loading State -->
                        <div id="authLoading" class="hidden w-full py-4 px-6 bg-slate-700 rounded-2xl">
                            <div class="flex items-center justify-center gap-3">
                                <div class="w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                                <span class="text-slate-300">Signing in...</span>
                            </div>
                        </div>
                        
                        <div id="authError" class="mt-4 p-4 bg-red-500/20 border border-red-500 rounded-xl text-red-400 text-center hidden animate-shake"></div>
                        
                        <!-- Features Preview -->
                        <div class="mt-8 pt-6 border-t border-slate-700/50">
                            <p class="text-center text-slate-500 text-sm mb-4">What you'll get:</p>
                            <div class="grid grid-cols-2 gap-3">
                                <div class="flex items-center gap-2 text-sm text-slate-400">
                                    <span class="text-green-400">‚úì</span> Track all subjects
                                </div>
                                <div class="flex items-center gap-2 text-sm text-slate-400">
                                    <span class="text-green-400">‚úì</span> Exam countdown
                                </div>
                                <div class="flex items-center gap-2 text-sm text-slate-400">
                                    <span class="text-green-400">‚úì</span> Progress sync
                                </div>
                                <div class="flex items-center gap-2 text-sm text-slate-400">
                                    <span class="text-green-400">‚úì</span> Custom themes
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <p class="text-center text-slate-500 text-xs mt-6 animate-slide-up" style="animation-delay: 0.3s;">
                        By signing in, you agree to track your studies like a pro! üöÄ
                    </p>
                </div>
            </div>
        </div>

        <!-- Setup Page -->
        <div id="setupPage" class="page">
            <div class="min-h-screen flex items-center justify-center p-4">
                <div class="w-full max-w-2xl">
                    <div class="text-center mb-8 animate-bounce-in">
                        <div class="text-6xl mb-4">üéì</div>
                        <h1 class="text-4xl font-bold mb-2">Welcome, <span id="setupUserName" class="text-blue-400"></span>!</h1>
                        <p class="text-slate-400 text-lg">Let's set up your ICSE study plan</p>
                    </div>
                    
                    <div class="glass rounded-3xl p-8 animate-slide-up shadow-2xl">
                        <!-- Progress Indicator -->
                        <div class="flex justify-center mb-8">
                            <div class="flex items-center gap-2">
                                <div id="stepIndicator1" class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center font-bold">1</div>
                                <div class="w-12 h-1 bg-slate-700 rounded"><div id="stepProgress1" class="h-full bg-blue-600 rounded transition-all duration-500" style="width: 0%"></div></div>
                                <div id="stepIndicator2" class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center font-bold">2</div>
                                <div class="w-12 h-1 bg-slate-700 rounded"><div id="stepProgress2" class="h-full bg-blue-600 rounded transition-all duration-500" style="width: 0%"></div></div>
                                <div id="stepIndicator3" class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center font-bold">3</div>
                            </div>
                        </div>
                        
                        <!-- Step 1: Stream Selection -->
                        <div id="step1" class="step">
                            <h2 class="text-2xl font-bold mb-2 text-center">Select Your Stream</h2>
                            <p class="text-slate-400 text-center mb-6">Choose your academic stream for Class 10</p>
                            <div class="grid grid-cols-2 gap-6">
                                <button onclick="selectStream('science')" class="stream-btn group p-8 rounded-2xl border-2 border-slate-700 hover:border-blue-500 transition-all card-hover bg-slate-800/50 relative overflow-hidden">
                                    <div class="absolute inset-0 bg-gradient-to-br from-blue-500/0 to-blue-500/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                    <div class="relative">
                                        <div class="text-6xl mb-4">üî¨</div>
                                        <div class="text-2xl font-bold">Science</div>
                                        <p class="text-sm text-slate-400 mt-2">Physics, Chemistry, Biology/Math</p>
                                    </div>
                                </button>
                                <button onclick="selectStream('commerce')" class="stream-btn group p-8 rounded-2xl border-2 border-slate-700 hover:border-purple-500 transition-all card-hover bg-slate-800/50 relative overflow-hidden">
                                    <div class="absolute inset-0 bg-gradient-to-br from-purple-500/0 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                    <div class="relative">
                                        <div class="text-6xl mb-4">üìä</div>
                                        <div class="text-2xl font-bold">Commerce</div>
                                        <p class="text-sm text-slate-400 mt-2">Commercial Studies, Economics</p>
                                    </div>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Step 2: Optional Subject -->
                        <div id="step2" class="step hidden">
                            <h2 class="text-2xl font-bold mb-2 text-center">Select Your Optional Subject</h2>
                            <p class="text-slate-400 text-center mb-6">Choose your Group 3 subject</p>
                            <div class="grid grid-cols-3 gap-4">
                                <button onclick="selectOptional('computer')" class="optional-btn group p-6 rounded-2xl border-2 border-slate-700 hover:border-cyan-500 transition-all card-hover bg-slate-800/50 relative overflow-hidden">
                                    <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/0 to-cyan-500/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                    <div class="relative">
                                        <div class="text-5xl mb-3">üíª</div>
                                        <div class="font-bold">Computer</div>
                                        <p class="text-xs text-slate-400 mt-1">Java Programming</p>
                                    </div>
                                </button>
                                <button onclick="selectOptional('pe')" class="optional-btn group p-6 rounded-2xl border-2 border-slate-700 hover:border-green-500 transition-all card-hover bg-slate-800/50 relative overflow-hidden">
                                    <div class="absolute inset-0 bg-gradient-to-br from-green-500/0 to-green-500/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                    <div class="relative">
                                        <div class="text-5xl mb-3">‚öΩ</div>
                                        <div class="font-bold">Physical Ed</div>
                                        <p class="text-xs text-slate-400 mt-1">Sports & Fitness</p>
                                    </div>
                                </button>
                                <button onclick="selectOptional('art')" class="optional-btn group p-6 rounded-2xl border-2 border-slate-700 hover:border-pink-500 transition-all card-hover bg-slate-800/50 relative overflow-hidden">
                                    <div class="absolute inset-0 bg-gradient-to-br from-pink-500/0 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                    <div class="relative">
                                        <div class="text-5xl mb-3">üé®</div>
                                        <div class="font-bold">Art</div>
                                        <p class="text-xs text-slate-400 mt-1">Drawing & Design</p>
                                    </div>
                                </button>
                            </div>
                            <button onclick="goBackToStep1()" class="mt-8 flex items-center gap-2 text-slate-400 hover:text-white transition-all mx-auto">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                                Go Back
                            </button>
                        </div>
                        
                        <!-- Step 3: Exam Date -->
                        <div id="step3" class="step hidden">
                            <h2 class="text-2xl font-bold mb-2 text-center">When is Your Exam? üìÖ</h2>
                            <p class="text-slate-400 text-center mb-6">We'll create a countdown timer for you</p>
                            <div class="max-w-sm mx-auto space-y-6">
                                <div class="relative">
                                    <input type="date" id="examDate" 
                                        class="w-full px-6 py-4 bg-slate-800/50 rounded-2xl border border-slate-700 focus:border-blue-500 transition-all text-lg text-center">
                                </div>
                                <div id="examPreview" class="text-center text-slate-400 text-sm hidden">
                                    <span id="examPreviewText"></span>
                                </div>
                                <button onclick="completeSetup()" class="w-full py-4 bg-gradient-to-r from-green-600 to-teal-600 rounded-2xl font-bold text-lg btn-3d hover:from-green-700 hover:to-teal-700 transition-all flex items-center justify-center gap-2">
                                    <span>üöÄ</span> Start My Journey!
                                </button>
                            </div>
                            <button onclick="goBackToStep2()" class="mt-8 flex items-center gap-2 text-slate-400 hover:text-white transition-all mx-auto">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                                Go Back
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page">
            <!-- Header -->
            <header class="sticky top-0 z-40 glass border-b border-slate-700/50">
                <div class="container mx-auto px-4 py-4 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c4/CISCE_logo.png/150px-CISCE_logo.png" 
                             alt="ICSE" class="w-10 h-10 rounded-full bg-white p-1">
                        <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400">ICSE Planner</h1>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="openSettings()" class="p-2 hover:bg-white/10 rounded-xl transition-all" title="Settings">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                        </button>
                        <div class="flex items-center gap-3">
                            <img id="userPhoto" src="" alt="" class="w-10 h-10 rounded-full border-2 border-blue-500 hidden">
                            <span id="userName" class="text-slate-300 hidden md:block font-medium"></span>
                        </div>
                        <button onclick="logout()" class="px-4 py-2 bg-red-600/20 text-red-400 rounded-xl hover:bg-red-600/30 transition-all flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
                            <span class="hidden md:inline">Logout</span>
                        </button>
                    </div>
                </div>
            </header>

            <main class="container mx-auto px-4 py-8">
                <!-- Timer Section -->
                <div class="glass rounded-3xl p-8 mb-8 animate-slide-up relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl"></div>
                    <div class="relative">
                        <h2 class="text-center text-xl text-slate-400 mb-6 flex items-center justify-center gap-2">
                            <span class="text-2xl">‚è∞</span> Time Until Exams
                        </h2>
                        <div id="examTimer" class="flex justify-center gap-4 md:gap-6 flex-wrap">
                            <div class="text-center">
                                <div id="timerDays" class="timer-digit text-4xl md:text-6xl font-bold px-4 md:px-6 py-4 rounded-2xl min-w-[80px] md:min-w-[120px] text-white">00</div>
                                <p class="text-sm text-slate-400 mt-3 font-medium">Days</p>
                            </div>
                            <div class="text-center">
                                <div id="timerHours" class="timer-digit text-4xl md:text-6xl font-bold px-4 md:px-6 py-4 rounded-2xl min-w-[80px] md:min-w-[120px] text-white">00</div>
                                <p class="text-sm text-slate-400 mt-3 font-medium">Hours</p>
                            </div>
                            <div class="text-center">
                                <div id="timerMinutes" class="timer-digit text-4xl md:text-6xl font-bold px-4 md:px-6 py-4 rounded-2xl min-w-[80px] md:min-w-[120px] text-white">00</div>
                                <p class="text-sm text-slate-400 mt-3 font-medium">Minutes</p>
                            </div>
                            <div class="text-center">
                                <div id="timerSeconds" class="timer-digit text-4xl md:text-6xl font-bold px-4 md:px-6 py-4 rounded-2xl min-w-[80px] md:min-w-[120px] text-white">00</div>
                                <p class="text-sm text-slate-400 mt-3 font-medium">Seconds</p>
                            </div>
                        </div>
                        <p id="examDateDisplay" class="text-center text-slate-400 mt-6 text-lg"></p>
                    </div>
                </div>

                <!-- Progress Overview -->
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="glass rounded-2xl p-6 card-hover animate-slide-left relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl"></div>
                        <div class="relative flex items-center justify-between">
                            <div>
                                <p class="text-slate-400 text-sm">Overall Progress</p>
                                <p id="overallProgress" class="text-5xl font-bold text-blue-400 mt-1">0%</p>
                            </div>
                            <svg class="w-24 h-24" viewBox="0 0 36 36">
                                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none" stroke="#334155" stroke-width="3"/>
                                <path id="progressRing" class="progress-ring"
                                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none" stroke="url(#progressGradient)" stroke-width="3"
                                    stroke-dasharray="0, 100" stroke-linecap="round"/>
                                <defs>
                                    <linearGradient id="progressGradient">
                                        <stop offset="0%" stop-color="#3b82f6"/>
                                        <stop offset="100%" stop-color="#8b5cf6"/>
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                    </div>
                    <div class="glass rounded-2xl p-6 card-hover animate-slide-up relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-2xl"></div>
                        <div class="relative">
                            <p class="text-slate-400 text-sm">Chapters Completed</p>
                            <p id="chaptersCompleted" class="text-5xl font-bold text-green-400 mt-1">0/0</p>
                            <div class="mt-3 h-2 bg-slate-700 rounded-full overflow-hidden">
                                <div id="chaptersBar" class="h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="glass rounded-2xl p-6 card-hover animate-slide-right relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-purple-500/10 rounded-full blur-2xl"></div>
                        <div class="relative">
                            <p class="text-slate-400 text-sm">Your Stream</p>
                            <p id="streamDisplay" class="text-4xl font-bold text-purple-400 mt-1">-</p>
                            <p id="optionalDisplay" class="text-slate-400 mt-2 text-sm"></p>
                        </div>
                    </div>
                </div>

                <!-- Syllabus Tracker -->
                <div class="glass rounded-3xl p-6 md:p-8 animate-slide-up">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold flex items-center gap-3">
                            <span class="text-3xl">üìö</span> Your Syllabus
                        </h2>
                        <div class="text-sm text-slate-400">
                            Click on a subject to expand
                        </div>
                    </div>
                    <div id="syllabusContainer" class="space-y-4">
                        <!-- Subjects will be loaded here -->
                    </div>
                </div>
            </main>

            <!-- Footer -->
            <footer class="glass border-t border-slate-700/50 mt-12 py-8">
                <div class="container mx-auto px-4 text-center">
                    <div class="flex items-center justify-center gap-3 mb-4">
                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c4/CISCE_logo.png/150px-CISCE_logo.png" 
                             alt="CISCE" class="w-8 h-8 rounded-full bg-white p-1 opacity-50">
                    </div>
                    <p class="text-slate-400 text-sm mb-2">
                        ‚ö†Ô∏è <strong>Disclaimer:</strong> This site is <strong>NOT</strong> affiliated to CISCE (Council for the Indian School Certificate Examinations).
                    </p>
                    <p class="text-slate-500 text-xs">Made with ‚ù§Ô∏è for ICSE Students | ¬© 2024 ICSE Planner</p>
                </div>
            </footer>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCqSu-4wkbFNpRINLlHo5sWGM-bPY-MBvM",
            authDomain: "icse-syllabus-tracker.firebaseapp.com",
            projectId: "icse-syllabus-tracker",
            storageBucket: "icse-syllabus-tracker.firebasestorage.app",
            messagingSenderId: "925688497446",
            appId: "1:925688497446:web:17823893ee2350942c2de7",
            measurementId: "G-17BGSZT6DD"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const googleProvider = new firebase.auth.GoogleAuthProvider();

        // Complete Syllabus Data - Only Chapter Names (No Subtopics)
        const syllabusData = {
            common: {
                "English Language": {
                    icon: "üìù",
                    color: "blue",
                    chapters: [
                        "Essay Writing",
                        "Letter Writing (Formal & Informal)",
                        "Notice Writing",
                        "Email Writing",
                        "Comprehension Passage",
                        "Tenses",
                        "Prepositions",
                        "Conjunctions",
                        "Modals",
                        "Subject-Verb Agreement",
                        "Active & Passive Voice",
                        "Direct & Indirect Speech",
                        "Transformation of Sentences",
                        "Question Tags",
                        "Phrasal Verbs & Idioms"
                    ]
                },
                "English Literature": {
                    icon: "üìñ",
                    color: "indigo",
                    chapters: [
                        "Julius Caesar - Act III",
                        "Julius Caesar - Act IV",
                        "Julius Caesar - Act V",
                        "With the Photographer ‚Äì Stephen Leacock",
                        "The Elevator ‚Äì William Sleator",
                        "The Girl Who Can ‚Äì Ama Ata Aidoo",
                        "The Pedestrian ‚Äì Ray Bradbury",
                        "The Last Lesson ‚Äì Alphonse Daudet",
                        "Haunted Houses ‚Äì H.W. Longfellow",
                        "The Glove and the Lions ‚Äì Leigh Hunt",
                        "When Great Trees Fall ‚Äì Maya Angelou",
                        "A Considerable Speck ‚Äì Robert Frost",
                        "The Power of Music ‚Äì Sukumar Ray"
                    ]
                },
                "Hindi": {
                    icon: "üî§",
                    color: "orange",
                    chapters: [
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§¨‡§æ‡§§ ‡§Ö‡§†‡§®‡•ç‡§®‡•Ä ‡§ï‡•Ä",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§ï‡§æ‡§ï‡•Ä",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§Æ‡§π‡§æ‡§Ø‡§ú‡•ç‡§û ‡§ï‡§æ ‡§™‡•Å‡§∞‡§∏‡•ç‡§ï‡§æ‡§∞",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§®‡•á‡§§‡§æ‡§ú‡•Ä ‡§ï‡§æ ‡§ö‡§∂‡•ç‡§Æ‡§æ",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§Ö‡§™‡§®‡§æ-‡§Ö‡§™‡§®‡§æ ‡§≠‡§æ‡§ó‡•ç‡§Ø",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§¨‡§°‡§º‡•á ‡§ò‡§∞ ‡§ï‡•Ä ‡§¨‡•á‡§ü‡•Ä",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§∏‡§Ç‡§¶‡•á‡§π",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§≠‡•Ä‡§°‡§º ‡§Æ‡•á‡§Ç ‡§ñ‡•ã‡§Ø‡§æ ‡§Ü‡§¶‡§Æ‡•Ä",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§≠‡•á‡§°‡§º‡•á‡§Ç ‡§î‡§∞ ‡§≠‡•á‡§°‡§º‡§ø‡§Ø‡•á",
                        "‡§ó‡§¶‡•ç‡§Ø - ‡§¶‡•ã ‡§ï‡§≤‡§æ‡§ï‡§æ‡§∞",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§∏‡§æ‡§ñ‡•Ä",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§ï‡•Å‡§Ç‡§°‡§≤‡§ø‡§Ø‡§æ‡§Å",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§∏‡•ç‡§µ‡§∞‡•ç‡§ó ‡§¨‡§®‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§µ‡§π ‡§Æ‡§æ‡§§‡•É‡§≠‡•Ç‡§Æ‡§ø ‡§Æ‡•á‡§∞‡•Ä",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§Æ‡•á‡§ò ‡§Ü‡§è",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§∏‡•Ç‡§∞ ‡§ï‡•á ‡§™‡§¶",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§µ‡§ø‡§®‡§Ø ‡§ï‡•á ‡§™‡§¶",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§≠‡§ø‡§ï‡•ç‡§∑‡•Å‡§ï",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§ö‡§≤‡§®‡§æ ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§ï‡§æ‡§Æ ‡§π‡•à",
                        "‡§™‡§¶‡•ç‡§Ø - ‡§Æ‡§æ‡§§‡•É ‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§ï‡•Ä ‡§ì‡§∞",
                        "‡§è‡§ï‡§æ‡§Ç‡§ï‡•Ä - ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§æ‡§∞ ‡§î‡§∞ ‡§≠‡§æ‡§µ‡§®‡§æ",
                        "‡§è‡§ï‡§æ‡§Ç‡§ï‡•Ä - ‡§¨‡§π‡•Ç ‡§ï‡•Ä ‡§µ‡§ø‡§¶‡§æ",
                        "‡§è‡§ï‡§æ‡§Ç‡§ï‡•Ä - ‡§Æ‡§æ‡§§‡•É‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡§æ ‡§Æ‡§æ‡§®",
                        "‡§è‡§ï‡§æ‡§Ç‡§ï‡•Ä - ‡§∏‡•Ç‡§ñ‡•Ä ‡§°‡§æ‡§≤‡•Ä",
                        "‡§è‡§ï‡§æ‡§Ç‡§ï‡•Ä - ‡§Æ‡§π‡§æ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§è‡§ï ‡§∏‡§æ‡§Å‡§ù",
                        "‡§è‡§ï‡§æ‡§Ç‡§ï‡•Ä - ‡§¶‡•Ä‡§™‡§¶‡§æ‡§®",
                        "‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£ - ‡§∏‡§Ç‡§ß‡§ø",
                        "‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£ - ‡§∏‡§Æ‡§æ‡§∏",
                        "‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£ - ‡§Æ‡•Å‡§π‡§æ‡§µ‡§∞‡•á ‡§î‡§∞ ‡§≤‡•ã‡§ï‡•ã‡§ï‡•ç‡§§‡§ø‡§Ø‡§æ‡§Å",
                        "‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£ - ‡§Ö‡§™‡§†‡§ø‡§§ ‡§ó‡§¶‡•ç‡§Ø‡§æ‡§Ç‡§∂",
                        "‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£ - ‡§™‡§§‡•ç‡§∞ ‡§≤‡•á‡§ñ‡§®",
                        "‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£ - ‡§®‡§ø‡§¨‡§Ç‡§ß ‡§≤‡•á‡§ñ‡§®"
                    ]
                },
                "History & Civics": {
                    icon: "üèõÔ∏è",
                    color: "amber",
                    chapters: [
                        "The First War of Independence 1857",
                        "Growth of Nationalism",
                        "First Phase of Indian National Movement (1885-1907)",
                        "Second Phase of Indian National Movement (1905-1916)",
                        "Mahatma Gandhi and the National Movement",
                        "The Freedom Movement (1935-1947)",
                        "The First World War",
                        "Rise of Dictatorships",
                        "The Second World War",
                        "United Nations Organization",
                        "Major Challenges Facing the World Today",
                        "The Union Legislature",
                        "The Union Executive",
                        "The Judiciary"
                    ]
                },
                "Geography": {
                    icon: "üåç",
                    color: "green",
                    chapters: [
                        "Map Work",
                        "Location, Extent and Physical Features of India",
                        "Climate of India",
                        "Soil Resources",
                        "Natural Vegetation",
                        "Water Resources",
                        "Mineral and Energy Resources",
                        "Agriculture in India",
                        "Industries in India",
                        "Transport in India",
                        "Waste Management"
                    ]
                }
            },
            science: {
                "Physics": {
                    icon: "‚öõÔ∏è",
                    color: "cyan",
                    chapters: [
                        "Force, Work, Power and Energy",
                        "Simple Machines",
                        "Calorimetry",
                        "Refraction of Light at Plane Surfaces",
                        "Refraction through a Lens",
                        "Spectrum",
                        "Sound",
                        "Current Electricity",
                        "Electrical Power and Household Circuits",
                        "Electromagnetism",
                        "Radioactivity and Nuclear Energy"
                    ]
                },
                "Chemistry": {
                    icon: "üß™",
                    color: "purple",
                    chapters: [
                        "Periodic Table and Periodicity of Properties",
                        "Chemical Bonding",
                        "Study of Acids, Bases and Salts",
                        "Analytical Chemistry",
                        "Mole Concept and Stoichiometry",
                        "Electrolysis",
                        "Metallurgy",
                        "Study of Compounds - Hydrogen Chloride",
                        "Study of Compounds - Ammonia",
                        "Study of Compounds - Nitric Acid",
                        "Study of Compounds - Sulphuric Acid",
                        "Organic Chemistry"
                    ]
                },
                "Biology": {
                    icon: "üß¨",
                    color: "emerald",
                    chapters: [
                        "Cell Division",
                        "Genetics",
                        "Human Evolution",
                        "Absorption by Roots",
                        "Transpiration",
                        "Photosynthesis",
                        "Chemical Coordination in Plants",
                        "The Circulatory System",
                        "The Excretory System",
                        "The Nervous System",
                        "The Endocrine System",
                        "The Reproductive System",
                        "Human Population",
                        "Pollution"
                    ]
                },
                "Mathematics": {
                    icon: "üìê",
                    color: "red",
                    chapters: [
                        "GST (Goods and Services Tax)",
                        "Banking",
                        "Shares and Dividends",
                        "Linear Inequations",
                        "Quadratic Equations",
                        "Ratio and Proportion",
                        "Remainder and Factor Theorem",
                        "Matrices",
                        "Arithmetic Progression",
                        "Geometric Progression",
                        "Coordinate Geometry",
                        "Similarity",
                        "Loci",
                        "Circles",
                        "Constructions",
                        "Mensuration",
                        "Trigonometric Identities",
                        "Heights and Distances",
                        "Statistics",
                        "Probability"
                    ]
                }
            },
            commerce: {
                "Commercial Studies": {
                    icon: "üíº",
                    color: "slate",
                    chapters: [
                        "Introduction to Business",
                        "Forms of Business Organizations",
                        "Trade",
                        "Banking Services",
                        "Insurance",
                        "Transport",
                        "Communication",
                        "Warehousing",
                        "Advertising",
                        "Salesmanship",
                        "Entrepreneurship",
                        "Consumer Protection"
                    ]
                },
                "Economics": {
                    icon: "üìà",
                    color: "teal",
                    chapters: [
                        "Introduction to Economics",
                        "Types of Economies",
                        "Demand and Supply",
                        "Price Determination",
                        "Elasticity of Demand",
                        "National Income",
                        "Money and Banking",
                        "Public Finance",
                        "Indian Economy",
                        "Poverty and Unemployment",
                        "Infrastructure Development",
                        "Globalization"
                    ]
                },
                "Mathematics (Commerce)": {
                    icon: "üî¢",
                    color: "pink",
                    chapters: [
                        "GST (Goods and Services Tax)",
                        "Banking",
                        "Shares and Dividends",
                        "Linear Inequations",
                        "Quadratic Equations",
                        "Ratio and Proportion",
                        "Matrices",
                        "Arithmetic Progression",
                        "Coordinate Geometry",
                        "Mensuration",
                        "Statistics",
                        "Probability"
                    ]
                }
            },
            optional: {
                computer: {
                    "Computer Applications": {
                        icon: "üíª",
                        color: "cyan",
                        chapters: [
                            "Introduction to Object Oriented Programming",
                            "Elementary Concepts of Objects and Classes",
                            "Values and Data Types",
                            "Operators in Java",
                            "Input in Java",
                            "Mathematical Library Methods",
                            "Conditional Statements",
                            "Iterative Statements",
                            "Nested Loops",
                            "Functions / Methods",
                            "Function Overloading",
                            "Arrays - Single Dimensional",
                            "Arrays - Double Dimensional",
                            "String Handling"
                        ]
                    }
                },
                pe: {
                    "Physical Education": {
                        icon: "üèÉ",
                        color: "lime",
                        chapters: [
                            "Health and Physical Fitness",
                            "First Aid",
                            "Personal Hygiene",
                            "Sports and Nutrition",
                            "Posture and Postural Deformities",
                            "Safety in Sports",
                            "Sports Injuries",
                            "Athletics",
                            "Team Games",
                            "Individual Sports",
                            "Yoga"
                        ]
                    }
                },
                art: {
                    "Art": {
                        icon: "üé®",
                        color: "rose",
                        chapters: [
                            "Fundamentals of Art and Design",
                            "Elements of Art",
                            "Principles of Design",
                            "Color Theory",
                            "Perspective Drawing",
                            "Still Life Drawing",
                            "Nature Study",
                            "Figure Drawing",
                            "Portrait Drawing",
                            "Landscape Drawing",
                            "Poster Making",
                            "Illustration",
                            "Indian Art Forms",
                            "History of Art"
                        ]
                    }
                }
            }
        };

        // State
        let currentUser = null;
        let userData = {
            name: '',
            email: '',
            photoURL: '',
            stream: '',
            optional: '',
            examDate: '',
            progress: {},
            settings: {
                theme: 'dark',
                color: 'blue'
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved settings
            const savedSettings = localStorage.getItem('icse_settings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                applySettings(settings);
            }
            
            // Date input preview
            document.getElementById('examDate').addEventListener('change', (e) => {
                const date = new Date(e.target.value);
                const preview = document.getElementById('examPreview');
                const previewText = document.getElementById('examPreviewText');
                if (e.target.value) {
                    preview.classList.remove('hidden');
                    previewText.textContent = `üìÖ ${date.toLocaleDateString('en-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
                }
            });

            setTimeout(() => {
                document.getElementById('loadingScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                }, 500);
            }, 2000);

            // Auth state listener
            auth.onAuthStateChanged(async (user) => {
                if (user) {
                    currentUser = user;
                    userData.name = user.displayName || 'Student';
                    userData.email = user.email;
                    userData.photoURL = user.photoURL || '';
                    
                    await loadUserData();
                    
                    if (userData.stream && userData.optional && userData.examDate) {
                        showPage('dashboardPage');
                        renderDashboard();
                        startTimer();
                    } else {
                        document.getElementById('setupUserName').textContent = userData.name.split(' ')[0];
                        showPage('setupPage');
                    }
                } else {
                    showPage('authPage');
                }
            });
        });

        // Settings Functions
        function openSettings() {
            document.getElementById('settingsModal').classList.remove('hidden');
            document.getElementById('newExamDate').value = userData.examDate || '';
            updateSettingsUI();
        }
        
        function closeSettings() {
            document.getElementById('settingsModal').classList.add('hidden');
        }
        
        function updateSettingsUI() {
            const theme = userData.settings?.theme || 'dark';
            const color = userData.settings?.color || 'blue';
            
            // Update theme buttons
            document.getElementById('darkModeBtn').classList.toggle('border-purple-500', theme === 'dark');
            document.getElementById('darkModeBtn').classList.toggle('bg-purple-500/20', theme === 'dark');
            document.getElementById('lightModeBtn').classList.toggle('border-yellow-500', theme === 'light');
            document.getElementById('lightModeBtn').classList.toggle('bg-yellow-500/20', theme === 'light');
            
            // Update color buttons
            document.querySelectorAll('.color-option').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.color === color);
            });
        }
        
        function setThemeMode(mode) {
            userData.settings = userData.settings || {};
            userData.settings.theme = mode;
            applySettings(userData.settings);
            saveSettings();
            updateSettingsUI();
        }
        
        function setThemeColor(color) {
            userData.settings = userData.settings || {};
            userData.settings.color = color;
            applySettings(userData.settings);
            saveSettings();
            updateSettingsUI();
        }
        
        function applySettings(settings) {
            const body = document.body;
            
            // Apply theme mode
            body.classList.remove('dark-mode', 'light-mode');
            body.classList.add(settings.theme === 'light' ? 'light-mode' : 'dark-mode');
            
            // Apply color theme
            body.classList.remove('theme-blue', 'theme-red', 'theme-pink', 'theme-purple', 'theme-green', 'theme-orange', 'theme-cyan');
            body.classList.add(`theme-${settings.color || 'blue'}`);
        }
        
        function saveSettings() {
            localStorage.setItem('icse_settings', JSON.stringify(userData.settings));
            saveUserData();
        }
        
        async function updateExamDate() {
            const newDate = document.getElementById('newExamDate').value;
            if (newDate) {
                userData.examDate = newDate;
                await saveUserData();
                updateTimer();
                closeSettings();
                createConfetti();
            }
        }
        
        async function resetProgress() {
            if (confirm('Are you sure you want to reset all your progress? This cannot be undone!')) {
                userData.progress = {};
                await saveUserData();
                renderDashboard();
                closeSettings();
            }
        }
        
        async function resetAll() {
            if (confirm('Are you sure you want to reset EVERYTHING? You will need to set up again. This cannot be undone!')) {
                userData = {
                    name: currentUser.displayName || 'Student',
                    email: currentUser.email,
                    photoURL: currentUser.photoURL || '',
                    stream: '',
                    optional: '',
                    examDate: '',
                    progress: {},
                    settings: { theme: 'dark', color: 'blue' }
                };
                await saveUserData();
                closeSettings();
                document.getElementById('setupUserName').textContent = userData.name.split(' ')[0];
                showPage('setupPage');
                
                // Reset setup steps
                document.getElementById('step1').classList.remove('hidden');
                document.getElementById('step2').classList.add('hidden');
                document.getElementById('step3').classList.add('hidden');
                document.getElementById('stepProgress1').style.width = '0%';
                document.getElementById('stepProgress2').style.width = '0%';
                document.getElementById('stepIndicator2').classList.add('bg-slate-700');
                document.getElementById('stepIndicator2').classList.remove('bg-blue-600');
                document.getElementById('stepIndicator3').classList.add('bg-slate-700');
                document.getElementById('stepIndicator3').classList.remove('bg-blue-600');
            }
        }

        // Google Sign In
        async function signInWithGoogle() {
            const btn = document.getElementById('googleSignInBtn');
            const loading = document.getElementById('authLoading');
            
            try {
                btn.classList.add('hidden');
                loading.classList.remove('hidden');
                
                const result = await auth.signInWithPopup(googleProvider);
                const user = result.user;
                
                // Check if user exists in Firestore
                const doc = await db.collection('users').doc(user.uid).get();
                if (!doc.exists) {
                    await db.collection('users').doc(user.uid).set({
                        name: user.displayName,
                        email: user.email,
                        photoURL: user.photoURL,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                
                createConfetti();
            } catch (error) {
                console.error('Sign in error:', error);
                btn.classList.remove('hidden');
                loading.classList.add('hidden');
                showAuthError(getErrorMessage(error.code));
            }
        }

        function getErrorMessage(code) {
            const messages = {
                'auth/popup-closed-by-user': 'Sign-in popup was closed. Please try again.',
                'auth/popup-blocked': 'Popup was blocked. Please allow popups for this site.',
                'auth/cancelled-popup-request': 'Sign-in cancelled. Please try again.',
                'auth/network-request-failed': 'Network error. Please check your connection.',
                'auth/user-disabled': 'This account has been disabled.',
                'auth/operation-not-allowed': 'Google sign-in is not enabled. Please contact support.'
            };
            return messages[code] || 'An error occurred. Please try again.';
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            errorDiv.classList.add('animate-shake');
            setTimeout(() => {
                errorDiv.classList.add('hidden');
                errorDiv.classList.remove('animate-shake');
            }, 5000);
        }

        // Load User Data
        async function loadUserData() {
            try {
                const doc = await db.collection('users').doc(currentUser.uid).get();
                if (doc.exists) {
                    const data = doc.data();
                    userData = { ...userData, ...data };
                    if (userData.settings) {
                        applySettings(userData.settings);
                    }
                }
            } catch (error) {
                console.error('Error loading user data:', error);
                const localData = localStorage.getItem('icse_userData_' + currentUser.uid);
                if (localData) {
                    userData = { ...userData, ...JSON.parse(localData) };
                    if (userData.settings) {
                        applySettings(userData.settings);
                    }
                }
            }
        }

        // Save User Data
        async function saveUserData() {
            try {
                await db.collection('users').doc(currentUser.uid).set(userData, { merge: true });
                localStorage.setItem('icse_userData_' + currentUser.uid, JSON.stringify(userData));
            } catch (error) {
                console.error('Error saving user data:', error);
                localStorage.setItem('icse_userData_' + currentUser.uid, JSON.stringify(userData));
            }
        }

        // Logout
        async function logout() {
            if (confirm('Are you sure you want to logout?')) {
                try {
                    await auth.signOut();
                    currentUser = null;
                    userData = { name: '', email: '', photoURL: '', stream: '', optional: '', examDate: '', progress: {}, settings: { theme: 'dark', color: 'blue' } };
                    showPage('authPage');
                    document.getElementById('googleSignInBtn').classList.remove('hidden');
                    document.getElementById('authLoading').classList.add('hidden');
                } catch (error) {
                    console.error('Logout error:', error);
                }
            }
        }

        // Page Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        // Setup Steps
        function selectStream(stream) {
            userData.stream = stream;
            document.querySelectorAll('.stream-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'border-purple-500', 'bg-blue-500/20', 'bg-purple-500/20');
            });
            event.currentTarget.classList.add(stream === 'science' ? 'border-blue-500' : 'border-purple-500');
            event.currentTarget.classList.add(stream === 'science' ? 'bg-blue-500/20' : 'bg-purple-500/20');
            
            document.getElementById('stepProgress1').style.width = '100%';
            document.getElementById('stepIndicator2').classList.remove('bg-slate-700');
            document.getElementById('stepIndicator2').classList.add('bg-blue-600');
            
            setTimeout(() => {
                document.getElementById('step1').classList.add('hidden');
                document.getElementById('step2').classList.remove('hidden');
                document.getElementById('step2').classList.add('animate-slide-up');
            }, 300);
        }

        function selectOptional(optional) {
            userData.optional = optional;
            document.querySelectorAll('.optional-btn').forEach(btn => {
                btn.classList.remove('border-cyan-500', 'border-green-500', 'border-pink-500', 'bg-cyan-500/20', 'bg-green-500/20', 'bg-pink-500/20');
            });
            const colors = { computer: 'cyan', pe: 'green', art: 'pink' };
            event.currentTarget.classList.add(`border-${colors[optional]}-500`);
            
            document.getElementById('stepProgress2').style.width = '100%';
            document.getElementById('stepIndicator3').classList.remove('bg-slate-700');
            document.getElementById('stepIndicator3').classList.add('bg-blue-600');
            
            setTimeout(() => {
                document.getElementById('step2').classList.add('hidden');
                document.getElementById('step3').classList.remove('hidden');
                document.getElementById('step3').classList.add('animate-slide-up');
                
                const nextYear = new Date().getFullYear() + 1;
                document.getElementById('examDate').value = `${nextYear}-03-01`;
                document.getElementById('examDate').dispatchEvent(new Event('change'));
            }, 300);
        }

        function goBackToStep1() {
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step1').classList.remove('hidden');
            document.getElementById('stepProgress1').style.width = '0%';
            document.getElementById('stepIndicator2').classList.add('bg-slate-700');
            document.getElementById('stepIndicator2').classList.remove('bg-blue-600');
        }

        function goBackToStep2() {
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
            document.getElementById('stepProgress2').style.width = '0%';
            document.getElementById('stepIndicator3').classList.add('bg-slate-700');
            document.getElementById('stepIndicator3').classList.remove('bg-blue-600');
        }

        async function completeSetup() {
            const examDate = document.getElementById('examDate').value;
            if (!examDate) {
                alert('Please select your exam date!');
                return;
            }
            userData.examDate = examDate;
            await saveUserData();
            createConfetti();
            showPage('dashboardPage');
            renderDashboard();
            startTimer();
        }

        // Render Dashboard
        function renderDashboard() {
            document.getElementById('userName').textContent = userData.name;
            
            const userPhoto = document.getElementById('userPhoto');
            if (userData.photoURL) {
                userPhoto.src = userData.photoURL;
                userPhoto.classList.remove('hidden');
            }
            
            document.getElementById('streamDisplay').textContent = userData.stream.charAt(0).toUpperCase() + userData.stream.slice(1);
            
            const optionalNames = { computer: 'Computer Applications', pe: 'Physical Education', art: 'Art' };
            document.getElementById('optionalDisplay').textContent = `+ ${optionalNames[userData.optional]}`;
            
            const subjects = getSubjectsForUser();
            const container = document.getElementById('syllabusContainer');
            container.innerHTML = '';

            let totalChapters = 0;
            let completedChapters = 0;

            subjects.forEach((subject, index) => {
                const subjectId = subject.name.replace(/\s+/g, '_').replace(/[()]/g, '');
                const chapters = subject.chapters;
                const completed = chapters.filter((_, i) => userData.progress[`${subjectId}_${i}`]).length;
                totalChapters += chapters.length;
                completedChapters += completed;
                const percentage = Math.round((completed / chapters.length) * 100);

                const subjectHTML = `
                    <div class="bg-slate-800/50 rounded-2xl overflow-hidden animate-slide-up border border-slate-700/50 hover:border-slate-600/50 transition-all" style="animation-delay: ${index * 0.05}s">
                        <button onclick="toggleSubject('${subjectId}')" class="w-full p-5 flex items-center justify-between hover:bg-slate-700/30 transition-all">
                            <div class="flex items-center gap-4">
                                <span class="text-4xl">${subject.icon}</span>
                                <div class="text-left">
                                    <h3 class="font-bold text-lg">${subject.name}</h3>
                                    <p class="text-sm text-slate-400">${completed}/${chapters.length} chapters completed</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-4">
                                <div class="hidden md:block w-32 h-3 bg-slate-700 rounded-full overflow-hidden">
                                    <div class="h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500" style="width: ${percentage}%"></div>
                                </div>
                                <span class="text-sm font-bold ${percentage === 100 ? 'text-green-400' : 'text-blue-400'} min-w-[45px] text-right">${percentage}%</span>
                                <svg id="arrow_${subjectId}" class="w-6 h-6 transition-transform duration-300 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </div>
                        </button>
                        <div id="chapters_${subjectId}" class="subject-accordion">
                            <div class="p-4 pt-0 space-y-2 max-h-96 overflow-y-auto">
                                ${chapters.map((chapter, i) => `
                                    <label class="chapter-item flex items-center gap-3 p-3 rounded-xl cursor-pointer ${userData.progress[`${subjectId}_${i}`] ? 'bg-green-500/10 border border-green-500/30' : 'border border-transparent hover:border-slate-600'}">
                                        <input type="checkbox" 
                                            ${userData.progress[`${subjectId}_${i}`] ? 'checked' : ''} 
                                            onchange="toggleChapter('${subjectId}', ${i})"
                                            class="w-5 h-5 rounded accent-green-500 cursor-pointer">
                                        <span class="flex-1 ${userData.progress[`${subjectId}_${i}`] ? 'line-through text-slate-500' : ''}">${chapter}</span>
                                        ${userData.progress[`${subjectId}_${i}`] ? '<span class="text-green-400 text-lg">‚úì</span>' : ''}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += subjectHTML;
            });

            updateProgress(completedChapters, totalChapters);
        }

        function getSubjectsForUser() {
            const subjects = [];
            
            Object.entries(syllabusData.common).forEach(([name, data]) => {
                subjects.push({ name, ...data });
            });

            const streamData = syllabusData[userData.stream];
            if (streamData) {
                Object.entries(streamData).forEach(([name, data]) => {
                    subjects.push({ name, ...data });
                });
            }

            const optionalData = syllabusData.optional[userData.optional];
            if (optionalData) {
                Object.entries(optionalData).forEach(([name, data]) => {
                    subjects.push({ name, ...data });
                });
            }

            return subjects;
        }

        function toggleSubject(subjectId) {
            const chapters = document.getElementById(`chapters_${subjectId}`);
            const arrow = document.getElementById(`arrow_${subjectId}`);
            chapters.classList.toggle('open');
            arrow.style.transform = chapters.classList.contains('open') ? 'rotate(180deg)' : '';
        }

        async function toggleChapter(subjectId, index) {
            const key = `${subjectId}_${index}`;
            userData.progress[key] = !userData.progress[key];
            await saveUserData();
            
            if (userData.progress[key]) {
                createConfetti();
            }
            
            renderDashboard();
        }

        function updateProgress(completed, total) {
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
            document.getElementById('overallProgress').textContent = `${percentage}%`;
            document.getElementById('chaptersCompleted').textContent = `${completed}/${total}`;
            document.getElementById('progressRing').setAttribute('stroke-dasharray', `${percentage}, 100`);
            document.getElementById('chaptersBar').style.width = `${percentage}%`;
        }

        // Timer
        function startTimer() {
            updateTimer();
            setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (!userData.examDate) return;
            
            const examDate = new Date(userData.examDate);
            const now = new Date();
            const diff = examDate - now;

            if (diff <= 0) {
                document.getElementById('timerDays').textContent = '00';
                document.getElementById('timerHours').textContent = '00';
                document.getElementById('timerMinutes').textContent = '00';
                document.getElementById('timerSeconds').textContent = '00';
                document.getElementById('examDateDisplay').textContent = 'üéâ Exam time! Good luck! You\'ve got this! üí™';
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('timerDays').textContent = String(days).padStart(2, '0');
            document.getElementById('timerHours').textContent = String(hours).padStart(2, '0');
            document.getElementById('timerMinutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('timerSeconds').textContent = String(seconds).padStart(2, '0');
            document.getElementById('examDateDisplay').textContent = `üìÖ Exam Date: ${new Date(userData.examDate).toLocaleDateString('en-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
        }

        // Confetti Animation
        function createConfetti() {
            const colors = ['#3b82f6', '#8b5cf6', '#ec4899', '#10b981', '#f59e0b', '#ef4444'];
            const shapes = ['square', 'circle'];
            
            for (let i = 0; i < 60; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti-piece';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = shapes[Math.floor(Math.random() * shapes.length)] === 'circle' ? '50%' : '2px';
                confetti.style.width = (Math.random() * 10 + 5) + 'px';
                confetti.style.height = (Math.random() * 10 + 5) + 'px';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 4000);
            }
        }
    </script>
</body>
</html>
